(function(t){function e(e){for(var n,o,r=e[0],l=e[1],c=e[2],h=0,d=[];h<r.length;h++)o=r[h],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},1003:function(t,e,a){"use strict";var n=a("ef85"),i=a.n(n);i.a},"162a":function(t,e,a){"use strict";var n=a("9b59"),i=a.n(n);i.a},"1fb5":function(t,e,a){"use strict";var n=a("4e05"),i=a.n(n);i.a},"20a0":function(t,e,a){"use strict";var n=a("d5da"),i=a.n(n);i.a},"2fc5":function(t,e,a){},"3bfe":function(t,e,a){},"457a":function(t,e,a){"use strict";var n=a("d7d1"),i=a.n(n);i.a},"4d28":function(t,e,a){},"4e05":function(t,e,a){},"548b":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],o=a("bc3a"),r=a.n(o),l=a("2b27"),c=a.n(l);n["a"].use(c.a),n["a"].$cookies.config("7d"),n["a"].prototype.$http=r.a,n["a"].prototype.$url="https://chemistry-api.azurewebsites.net";var u={name:"App"},h=u,d=(a("034f"),a("2877")),m=Object(d["a"])(h,i,s,!1,null,null,null),p=m.exports,f=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("h2",[t._v("Sign In")]),a("form",{attrs:{id:"login"},on:{submit:function(e){return e.preventDefault(),t.signIn(e)}}},[a("InputField",{staticClass:"mrt-1",attrs:{label:"Username",type:"text",name:"username",placeholder:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("InputField",{staticClass:"mrt-1",attrs:{label:"Password",type:"password",name:"password",placeholder:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("Button",{staticClass:"mrt-1"},[t._v("Sign In")])],1)])},v=[],b=(a("4160"),a("fb6a"),a("ac1f"),a("5319"),a("159b"),a("96cf"),a("1da1")),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-container"},[a("label",[t._v(t._s(t.label))]),a("input",{staticClass:"input-field",attrs:{type:t.type,name:t.name,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])},y=[],w=n["a"].extend({name:"InputField",props:{value:String,label:String,type:String,name:String,placeholder:String}}),x=w,k=(a("79eb"),Object(d["a"])(x,C,y,!1,null,"1752c324",null)),_=k.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn"},[t._t("default")],2)},S=[],E=n["a"].extend({name:"Button"}),O=E,j=(a("e775"),Object(d["a"])(O,$,S,!1,null,"78216b30",null)),B=j.exports;String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var I={name:"LoginForm",components:{InputField:_,Button:B},data:function(){return{username:"",password:"",errors:{}}},methods:{signIn:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var a,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.username,i=t.password,e.next=3,t.$http.post("".concat(t.$url,"/api/user/login"),{username:a,password:i},{validateStatus:!1});case 3:s=e.sent,o=s.data,o.error||s.status>=400?(t.errors={},o.data.forEach((function(e){t.errors[e.context]=e.message.replace(/"/g,"").capitalize()}))):(t.errors={},n["a"].$cookies.set("auth-token",o.data.token));case 6:case"end":return e.stop()}}),e)})))()}}},A=I,L=(a("af1f"),Object(d["a"])(A,g,v,!1,null,"be4a4aba",null)),M=L.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"col"},[a("h3",{staticClass:"fancy"},[t._v("Navigate")]),a("Navigation"),a("h3",{staticClass:"fancy"},[t._v("Existing molecules")]),a("ul",t._l(t.molecules,(function(e){return a("li",{key:e.formula},[a("img",{attrs:{src:"https://image.flaticon.com/icons/png/512/883/883026.png"}}),a("span",{staticClass:"text-el"},[a("span",[t._v(" "+t._s(e.formula)),a("b",[t._v(t._s(e.name))])]),a("img",{staticClass:"remove-butt",attrs:{src:"https://img.icons8.com/flat_round/25/000000/delete-sign.png"},on:{click:function(a){return t.remove(e._id)}}})])])})),0)],1),a("div",{staticClass:"col-2"},[a("h3",{staticClass:"fancy"},[t._v("Add molecule")]),a("div",{staticClass:"inputs"},[a("InputField",{staticClass:"mrt-1",attrs:{label:"Molecule name",type:"text",name:"name",placeholder:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("InputField",{staticClass:"mrt-1",attrs:{label:"Formula",type:"text",name:"formula",placeholder:""},model:{value:t.formula,callback:function(e){t.formula=e},expression:"formula"}})],1),a("GameLevelCreator",{ref:"gameLevelCreator",attrs:{name:t.name,formula:t.formula}}),a("RoughButton",{staticClass:"mrt-1",attrs:{type:"success"},nativeOn:{click:function(e){return t.submit(e)}}},[t._v(" Add molecule ")])],1)])},T=[],P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[a("img",{attrs:{src:"https://image.flaticon.com/icons/png/512/883/883026.png"}}),a("router-link",{attrs:{to:"/"}},[t._v("Molecules")])],1),a("li",[a("img",{attrs:{src:"https://image.flaticon.com/icons/svg/341/341531.svg"}}),a("router-link",{attrs:{to:"/elements"}},[t._v(" Elements")])],1),a("li",[a("img",{attrs:{src:"https://image.flaticon.com/icons/svg/3079/3079017.svg"}}),a("router-link",{attrs:{to:"/game/H2O"}},[t._v("Game")])],1)])},R=[],G=n["a"].extend({name:"Naviagtion"}),N=G,H=(a("7808"),Object(d["a"])(N,P,R,!1,null,"10194498",null)),D=H.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"flex-col"},[a("div",{staticClass:"instructions"},[a("h3",{staticClass:"fancy"},[t._v(" Draw "),a("div",{staticClass:"molecule"},[t._v(" "+t._s(t.name)+" "),a("span",{staticClass:"formula"},[t._v(t._s(t.formula))])]),t._v(" 's molecule ")])]),a("div",{attrs:{id:"paper-container"}},[a("Canvas",{attrs:{paperHolderId:t.paperHolderId},on:{init:t.setupGraph,addAvailableElement:t.addAvailableElement}})],1)])])},z=[],Y=(a("bf19"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("fragment",[a("div",{staticClass:"paper-relative"},[a("div",{ref:"joint",staticClass:"paper",attrs:{id:"paper"}}),a("div",{staticClass:"switch-container"},[a("ActionSwitch",{attrs:{action:"move",active:"move"===t.action,img:"https://image.flaticon.com/icons/svg/918/918738.svg",text:"Move"},on:{actionChange:this.changeAction}}),a("ActionSwitch",{attrs:{action:"connect",active:"connect"===t.action,img:"https://image.flaticon.com/icons/svg/876/876225.svg",text:"Connect"},on:{actionChange:this.changeAction}}),a("ActionSwitch",{attrs:{action:"delete",active:"delete"===t.action,img:"https://image.flaticon.com/icons/svg/1450/1450571.svg",text:"Delete"},on:{actionChange:this.changeAction}})],1)])])}),V=[],J=a("3f08"),X=a("fba3"),U=a.n(X),K=a("ffe3"),q=K["dia"].Link.define("rough.Link",{z:5,attrs:{line:{rough:{bowing:1},stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"none"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]},{attributes:{rough:{set:function(t){var e=this.paper.rough;if(e){var a={bowing:t.bowing||1};return{d:e.opsToPath(e.generator.path(this.getSerializedConnection(),a).sets[0])}}}}}}),Q=q,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{class:["switch",t.active?"active":"inactive"],on:{click:t.click}},[a("div",{staticClass:"img-holder"},[a("img",{attrs:{src:t.img}})]),a("span",{staticClass:"text"},[t._v(t._s(t.text))])])},tt=[],et={name:"ActionSwitch",props:{action:String,active:Boolean,img:String,text:String},methods:{click:function(){this.$emit("actionChange",this.action)}}},at=et,nt=(a("f43c"),Object(d["a"])(at,Z,tt,!1,null,"4801eec6",null)),it=nt.exports,st=a("de6d"),ot={name:"Canvas",components:{Fragment:J["a"],ActionSwitch:it},props:{background:{type:[Object,Boolean],default:!1},paperHolderId:String,color:String},data(){return{action:"move"}},methods:{validateMagnet(t,e,a){return"connect"===this.action||"on-shift"===e.getAttribute("magnet")&&a.shiftKey},isDeleteMode(){return"delete"===this.action},isMoveMode(){return"move"===this.action},isLowWidth(){return window.innerWidth<1024},getHighlightOptions(){return this.isLowWidth()?{highlighter:{name:"addClass",options:{className:""}}}:{highlighter:{name:"addClass",options:{className:"highlighted-cell "+this.action}}}},createPaper(){const t=this.validateMagnet,e=this.isMoveMode,a=this.graph,n=new this.$joint.dia.Paper({el:this.$refs.joint,cellViewNamespace:this.$joint.shapes,model:this.graph,width:"100%",height:"100%",gridSize:this.config.paper.gridSize,drawGrid:this.config.paper.drawGrid,background:this.background,connectionStrategy:this.$joint.connectionStrategies.pinAbsolute,async:!0,clickTreshold:5,defaultConnectionPoint:{name:"boundary"},allowLink:t=>{try{const{source:e,target:n}=t.model.attributes,i=a.getCell(n.id).get("deleteable");return e.anchor&&n.anchor&&i&&e.id!==n.id}catch(e){return!1}},validateMagnet:t,defaultLink:function(){let t=new Q;return t.set("movable",!0),t.set("deleteable",!0),t},interactive:t=>{const a=t.model.get("movable"),n=t.model.get("deleteable");return!(!n&&a&&!e())&&a}});this.paper=n,this.paper.rough=U.a.svg(this.paper.svg)},addPaperListeners(){const t=this.$joint,e=this.config;let a;const n=this.getHighlightOptions,i=this.isDeleteMode,s=this.isLowWidth;window.addEventListener("resize",this.$joint.util.debounce(this.scaleContentToFit),!1),this.paper.on({"link:mouseenter":function(a){a.addTools(new t.dia.ToolsView({tools:[new t.linkTools.Remove({distance:e.link.removeButtOffset})]}))},"link:pointerdown":function(t){i()&&t.model.remove({disconnectLinks:!0})},"element:pointerdown":function(t){i()&&t.model.get("deleteable")&&t.model.remove(),a={...t.model.attributes.position}},"element:pointerup":t=>{if(!t.model.get("movable"))return;const e=t.model.attributes.position;if(e.y<this.config.availableElements.boxHeight)t.model.position(a.x,a.y);else if(!t.model.get("deleteable")){t.model.set("deleteable",!0);const{element:e,i:a}=t.model.get("nodeInfo");this.$emit("addAvailableElement",e,a)}},"element:mouseenter":function(e){if(s())return;if(e.model.get("movable")&&e.highlight(null,n()),!e.model.get("movable")||!e.model.get("deleteable"))return;let a=e.model,i=a.getBBox(),o=1-Math.cos(t.g.toRad(45)),r="ellipse"===a.attr(["pointers","pointerShape"])?{x:-o*i.width/2,y:o*i.height/2}:{x:-3,y:3};e.addTools(new t.dia.ToolsView({tools:[new t.elementTools.Remove({useModelGeometry:!0,y:"0%",x:"100%",offset:r})]}))},"cell:mouseleave":function(t){t.removeTools(),t.unhighlight(null,n())}})},scaleContentToFit(){this.paper.scaleContentToFit({minScaleX:1,minScaleY:1,maxScaleX:1.1,maxScaleY:1.1}),this.addBorder()},addBorder(){this.border&&this.paper.svg.removeChild(this.border);const t={width:document.getElementById(this.paperHolderId).clientWidth,height:document.getElementById(this.paperHolderId).clientHeight},e=4,a=this.paper.rough.rectangle(e,e,t.width-2*e,t.height-2*e,{roughness:1,seed:18786,strokeWidth:2,disableMultiStroke:!0,stroke:"#d1d1d1"});this.paper.svg.appendChild(a),this.border=a},changeAction(t){this.action=t}},mounted(){window.joint=st,this.graph=new this.$joint.dia.Graph,this.createPaper(),this.addPaperListeners(),this.scaleContentToFit(),this.$emit("init",this.graph,this.paper)}},rt=ot,lt=(a("162a"),Object(d["a"])(rt,Y,V,!1,null,null,null)),ct=lt.exports,ut=(a("a623"),a("4de4"),a("7db0"),a("d81d"),a("45fc"),a("b85c")),ht=function(t){var e=t.cells.filter((function(t){return"rough.Link"===t.type})),a=t.cells.filter((function(t){return"rough.Rectangle"===t.type&&t.deleteable})),n=function(t){return a.some((function(e){return e.id===t.source.id}))&&a.some((function(e){return e.id===t.target.id}))};if(!e.every(n))return!1;var i,s=a.map((function(t){return{id:t.id,el:t.nodeInfo.element.sign,connections:[]}})),o=Object(ut["a"])(s);try{var r=function(){var t,a=i.value,n=e.filter((function(t){return t.target.id===a.id||t.source.id===a.id})).map((function(t){return{iterated:!1,id:t.source.id===a.id?t.target.id:t.source.id}})),o=Object(ut["a"])(n);try{var r=function(){var e=t.value,i=n.filter((function(t){return t.id===e.id}));if(i.some((function(t){return t.iterated})))return"continue";var o=i.length,r=s.find((function(t){return t.id===e.id})),l=r.el;a.connections.push({valency:o,el:l}),e.iterated=!0};for(o.s();!(t=o.n()).done;)r()}catch(l){o.e(l)}finally{o.f()}};for(o.s();!(i=o.n()).done;)r()}catch(l){o.e(l)}finally{o.f()}return s.forEach((function(t){return delete t.id})),s},dt=ht,mt=n["a"].extend({name:"GameLevelCreator",components:{Canvas:ct},props:{name:String,formula:String},data:function(){return{paperHolderId:"paper-container",radius:70}},methods:{getSolution:function(){var t=this.graph.toJSON(),e=dt(t);return e},getElementsForRender:function(){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function e(){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="".concat(t.$url,"/api/element"),e.next=3,t.$http.get(a,{headers:{"auth-token":t.$cookies.get("auth-token")}});case 3:if(n=e.sent,!(n.status>=400)){e.next=6;break}return e.abrupt("return",!1);case 6:return i=n.data.data,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))()},addAvailableElement:function(t,e){var a=this.roughCircle(this.radius,t.sign,t.bgColor,t.labelColor);a.position(e*(this.radius+this.config.availableElements.distance)+this.config.availableElements.xOffset,this.config.availableElements.yOffset),a.set("deleteable",!1),a.set("nodeInfo",{element:t,i:e}),this.graph.addCells(a)},setupGraph:function(t,e){var a=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){var i,s,o,r,l,c,u,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.graph=t,i=a.$joint,s=a.config,o=a.roughBox(4*document.getElementById("paper-container").clientWidth,s.availableElements.boxHeight,s.availableElements.boxText),t.addCells(o),n.next=7,a.getElementsForRender();case 7:r=n.sent,l=document.getElementById("paper-container").clientWidth,c=a.config.availableElements,u=c.xOffset,h=c.distance,a.radius=Math.min((l-u-r.length*h)/r.length,a.radius),r.forEach((function(t,e){return a.addAvailableElement(t,e)})),i.V(e.findViewByModel(o).el).addClass("unmovable-cell");case 13:case"end":return n.stop()}}),n)})))()}},mounted:function(){}}),pt=mt,ft=(a("1fb5"),Object(d["a"])(pt,W,z,!1,null,"9e99d50c",null)),gt=ft.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{class:["butt",t.type],on:{click:t.submit}},[t._t("default")],2)},bt=[],Ct={name:"RoughButton",props:{type:{type:String,default:"success"}},methods:{submit:function(){this.$emit("submit")}}},yt=Ct,wt=(a("863c"),Object(d["a"])(yt,vt,bt,!1,null,"315fae33",null)),xt=wt.exports,kt=n["a"].extend({name:"ListMolecules",components:{InputField:_,Navigation:D,GameLevelCreator:gt,RoughButton:xt},data(){return{molecules:[],name:"",formula:""}},methods:{async remove(t){const e=await this.$http.delete(`${this.$url}/api/molecule/${t}`,{headers:{"auth-token":this.$cookies.get("auth-token")}});e.status>=400?console.error("erorr",e):this.molecules=this.molecules.filter(e=>e._id!==t)},async submit(){const t=this.$refs.gameLevelCreator.getSolution(),e=await this.$http.post(this.$url+"/api/molecule",{name:this.name,formula:this.formula,solution:t},{headers:{"auth-token":this.$cookies.get("auth-token")}});if(e.status>=400)return!1;const a=await this.retrieveData();a&&(this.molecules=a.molecules)},loggedInCookie(){return this.$cookies.get("auth-token")||!1},async retrieveData(){if(!this.loggedInCookie())return!1;const t=await this.$http.get(this.$url+"/api/molecule",{headers:{"auth-token":this.$cookies.get("auth-token")}});if(t.status>=400)return!1;const e={molecules:t.data.data};return e}},async beforeMount(){const t=await this.retrieveData();t?this.molecules=t.molecules:this.$router.push("/login")}}),_t=kt,$t=(a("e596"),Object(d["a"])(_t,F,T,!1,null,"00f797b1",null)),St=$t.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"col"},[t.molecules?a("ul",[a("div",{staticClass:"instructions"},[a("h3",{staticClass:"fancy"},[t._v("Levels")])]),t._l(t.molecules,(function(e){return a("a",{key:e.formula,attrs:{href:"#/game/"+e.formula}},[a("li",{class:t.formula===e.formula?"active":""},[a("img",{attrs:{src:"https://image.flaticon.com/icons/png/512/883/883026.png"}}),a("span",{domProps:{innerHTML:t._s(t.subscript(e.formula))}}),a("b",[t._v(t._s(e.name))])])])}))],2):a("CssLoader")],1),a("div",{staticClass:"col-2"},[t.loading?a("CssLoader"):t.error?a("div",{staticClass:"error-message"},[a("b",[t._v("Error!")]),t._v(" This molecule does not exist!")]):a("div",{staticClass:"flex-col"},[a("div",{staticClass:"instructions"},[a("h3",{staticClass:"fancy"},[t._v(" Draw "),a("div",{staticClass:"molecule"},[t._v(t._s(t.name)+" "),a("span",{staticClass:"formula",domProps:{innerHTML:t._s(this.subscript(t.formula))}})]),t._v(" 's molecule ")])]),a("div",{attrs:{id:"paper-container"}},[a("Canvas",{attrs:{background:t.background,paperHolderId:t.paperHolderId,color:t.color},on:{init:t.setupGraph,addAvailableElement:t.addAvailableElement}})],1),a("div",{staticClass:"button-holder"},[a("RoughButton",{staticClass:"button",attrs:{type:"warning"},on:{submit:t.help}},[a("img",{attrs:{src:"https://image.flaticon.com/icons/svg/2476/2476190.svg"}}),t._v(" Help ")]),a("RoughButton",{staticClass:"button",attrs:{type:"error"},on:{submit:t.reset}},[a("img",{attrs:{src:"https://image.flaticon.com/icons/svg/2039/2039083.svg"}}),t._v(" Reset ")]),a("RoughButton",{staticClass:"button",attrs:{type:"success"},on:{submit:t.submit}},[a("img",{attrs:{src:"https://image.flaticon.com/icons/svg/1828/1828743.svg"}}),t._v(" Submit ")])],1)])],1)])},Ot=[],jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("fragment",[a("div",{staticClass:"lds-ring"},[a("div"),a("div"),a("div"),a("div")])])},Bt=[],It={name:"CssLoader",components:{Fragment:J["a"]}},At=It,Lt=(a("457a"),Object(d["a"])(At,jt,Bt,!1,null,"72080f88",null)),Mt=Lt.exports,Ft=n["a"].extend({name:"GameLevel",props:{elementsLink:{type:String},onSubmit:Function,color:String},components:{Canvas:ct,RoughButton:xt,CssLoader:Mt},watch:{async $route(){await this.getMoleculeData(),await this.setupGraph(this.graph,this.paper)}},data(){return{background:{color:"white"},loading:!0,name:null,formula:null,paperHolderId:"paper-container",radius:70,molecules:!1,error:!1}},methods:{subscript(t){return t.replace(/\d/gi,"<sub>$&</sub>")},async getElementsForRender(){try{const t=`${this.$url}/api/molecule/elements/${this.formula}`,e=await this.$http.get(t),a=e.data.data;return this.error=!1,a}catch(t){return console.log(t),this.error=!0,!1}},async getAllMolecules(){const t=await this.$http.get(this.$url+"/api/molecule");t.data.data.sort((t,e)=>t.formula>e.formula?-1:1),this.molecules=t.data.data},async getMoleculeData(){this.loading=!0,this.formula=null,this.name=null;const t=`${this.$url}/api/molecule/${this.$route.params.formula}`;try{const e=await this.$http.get(t);this.formula=e.data.data.formula,this.name=e.data.data.name,this.loading=!1,this.error=!1}catch(e){console.log(e),this.error=!0,this.loading=!1}},addAvailableElement(t,e){const a=this.roughCircle(this.radius,t.sign,t.bgColor,t.labelColor);a.position(e*(this.radius+this.config.availableElements.distance)+this.config.availableElements.xOffset,this.config.availableElements.yOffset),a.set("deleteable",!1),a.set("nodeInfo",{element:t,i:e}),this.graph.addCells(a)},async setupGraph(t,e){this.graph=t,this.paper=e;const a=this.$joint,n=this.config,i=this.roughBox(10*document.getElementById("paper-container").clientWidth,n.availableElements.boxHeight,n.availableElements.boxText);t.addCells(i);const s=await this.getElementsForRender(),o=document.getElementById("paper-container").clientWidth,{xOffset:r,distance:l}=this.config.availableElements;this.radius=Math.min((o-r-s.length*l)/s.length,this.radius),s.forEach((t,e)=>this.addAvailableElement(t,e)),a.V(e.findViewByModel(i).el).addClass("unmovable-cell")},async submit(){const t=this.graph.toJSON(),e=dt(t),a=await this.$http.post(this.$url+"/api/molecule/check",{formula:this.formula,solution:e});if(200===a.status){const t=a.data.data.correct;this.fireSwal(t)}},reset(){const t=this.graph.getCells().filter(t=>t.get("deleteable"));this.graph.removeCells(t)},fireSwal(t){t?this.$swal({title:"Good job!",text:"You have entered the correct solution! Congratulations!",icon:"success",confirmButtonText:"Next Level",showCancelButton:!0,cancelButtonText:"Stay",cancelButtonColor:"#fff",reverseButtons:!0,heightAuto:!1,customClass:{cancelButton:"cancel-button"},showLoaderOnConfirm:!0,preConfirm:async()=>await this.$http.get(this.$url+"/api/molecule"),allowOutsideClick:()=>!this.$swal.isLoading()}).then(t=>{if(t.value){const{data:e}=t.value.data;e.sort((t,e)=>t.formula>e.formula?-1:1);let a=e.findIndex(t=>t.formula===this.formula);const n=a===e.length-1?0:a+1;this.$router.push({name:"Game",params:{formula:e[n].formula}})}}):this.$swal({title:"Incorrect!",text:"Your solution was incorrect. Keep trying!",icon:"error",confirmButtonText:"Try again",confirmButtonColor:"#bf1313",heightAuto:!1})},help(){this.$swal.mixin({confirmButtonText:"Next &rarr;",showCancelButton:!0,cancelButtonText:"Close",cancelButtonColor:"#fff",customClass:{cancelButton:"cancel-button"},heightAuto:!1,reverseButtons:!0,progressSteps:["1","2","3","4"]}).queue([{title:"Controls",html:"<img src='https://i.snipboard.io/pIgTYM.jpg' /> <br />                             You can choose what action you want to perform by clicking the respective button in the action select menu!"},{title:"Moving elements",html:"<img src='https://i.imgur.com/ognkPi5.gif' /><br />                             Drag and drop to move elements. When you need new elements just take them from the elements bar!"},{title:"Creating bonds",html:"<img src='https://i.imgur.com/T61wzFy.gif' /><br />                             Choose <i>\"Connect mode\"</i> to create bonds between two elements. You can alternatively hold <b>⇧ shift</b> and left click while on move mode."},{title:"Deleting",html:"<img src='https://i.imgur.com/UR4lMoi.gif' /><br />                             Choose <i>\"Delete mode\"</i> to delete existing elements or bonds. You can alternatively hover and press the (x) button while on move or connect mode."}])}},async beforeMount(){await this.getAllMolecules(),await this.getMoleculeData()}}),Tt=Ft,Pt=(a("20a0"),Object(d["a"])(Tt,Et,Ot,!1,null,null,null)),Rt=Pt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"page"},[a("div",{staticClass:"col"},[t._m(0),a("Navigation"),t.elements?a("div",[a("div",{staticClass:"instructions"},[a("h3",{staticClass:"fancy"},[t._v("Existing elements")])]),a("ul",t._l(t.elements,(function(e){return a("li",{key:e.sign},[a("span",{staticClass:"text-el"},[a("span",{staticClass:"text"},[a("ElementPreview",{attrs:{bgColor:e.bgColor,labelColor:e.labelColor}},[t._v(t._s(e.sign))]),a("b",[t._v(t._s(e.name))])],1),a("img",{staticClass:"remove-butt",attrs:{src:"https://img.icons8.com/flat_round/52/000000/delete-sign.png"},on:{click:function(a){return t.remove(e._id)}}})])])})),0)]):a("CssLoader")],1),a("div",{staticClass:"col-2"},[a("div",{staticClass:"page"},[a("div",{staticClass:"col-2",staticStyle:{"margin-right":"10px"}},[a("h3",{staticClass:"fancy"},[t._v("Add new element")]),a("form",{attrs:{id:"login"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticStyle:{display:"flex","flex-direction":"row"}},[a("div",{staticClass:"mrt-1",staticStyle:{display:"flex","flex-direction":"column",flex:"1","margin-left":"20px"}},[a("span",{staticClass:"mrt-1 mrb-1"},[t._v("Background Color")]),a("Chrome-picker",{model:{value:t.bgColor,callback:function(e){t.bgColor=e},expression:"bgColor"}})],1),a("div",{staticClass:"mrt-1",staticStyle:{display:"flex","flex-direction":"column","margin-left":"20px",flex:"1"}},[a("span",{staticClass:"mrt-1 mrb-1"},[t._v("Label Color")]),a("Chrome-picker",{model:{value:t.labelColor,callback:function(e){t.labelColor=e},expression:"labelColor"}})],1),a("div",{staticClass:"mrt-1",staticStyle:{display:"flex","flex-direction":"column",flex:"3","margin-left":"20px"}},[a("InputField",{staticClass:"mrt-1",attrs:{label:"Name",type:"text",name:"name",placeholder:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("InputField",{staticClass:"mrt-1",attrs:{label:"Sign",type:"text",name:"sign",placeholder:""},model:{value:t.sign,callback:function(e){t.sign=e},expression:"sign"}}),a("RoughButton",{staticClass:"mrt-1",attrs:{type:"success"}},[t._v(" Add element ")])],1)])])]),a("div",{staticClass:"col"},[a("h3",{staticClass:"fancy",staticStyle:{"margin-left":"10px"}},[t._v("Live preview")]),a("ElementPreview",{staticClass:"element-preview",attrs:{bgColor:this.bgColor.hex,labelColor:this.labelColor.hex,scale:3}},[t._v(t._s(this.sign))]),a("div",{staticClass:"preview-name"},[t._v(t._s(t.name))])],1)])])])])},Nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"instructions"},[a("h3",{staticClass:"fancy"},[t._v("Navigate")])])}],Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"element",style:"background: "+this.bgColor+"; color: "+this.labelColor+"; transform: scale("+this.scale+")"},[t._t("default")],2)},Dt=[],Wt=(a("a9e3"),{name:"ElementPreview",props:{bgColor:String,labelColor:String,scale:{type:Number,default:1}}}),zt=Wt,Yt=(a("1003"),Object(d["a"])(zt,Ht,Dt,!1,null,"143d4a00",null)),Vt=Yt.exports,Jt=a("c345"),Xt=n["a"].extend({components:{InputField:_,RoughButton:xt,Navigation:D,ElementPreview:Vt,"Chrome-picker":Jt["Chrome"]},data(){return{elements:[],message:"",name:"Element",sign:"E",bgColor:{hex:"#55FFBE"},labelColor:{hex:"#333333"},colors:"#000000"}},methods:{async remove(t){const e=await this.$http.delete(`${this.$url}/api/element/${t}`,{headers:{"auth-token":this.$cookies.get("auth-token")}});e.status>=400?console.error("erorr",e):this.elements=this.elements.filter(e=>e._id!==t)},loggedInCookie(){return this.$cookies.get("auth-token")||!1},async retrieveData(){if(!this.loggedInCookie())return!1;const t=await this.$http.get(this.$url+"/api/element",{headers:{"auth-token":this.$cookies.get("auth-token")}});if(t.status>=400)return!1;const e=t.data.data;return e},async submit(){const{name:t,sign:e,bgColor:a,labelColor:n}=this,i=await this.$http.post(this.$url+"/api/element/",{name:t,sign:e,bgColor:a.hex,labelColor:n.hex},{headers:{"auth-token":this.$cookies.get("auth-token")}});i.code>400?this.message="Error, please try again":(this.elements.push(i.data.data),this.message="Element added!")}},async beforeMount(){const t=await this.retrieveData();t?this.elements=t:this.$router.push("/login")}}),Ut=Xt,Kt=(a("7d65"),Object(d["a"])(Ut,Gt,Nt,!1,null,"185486e0",null)),qt=Kt.exports;n["a"].use(f["a"]);var Qt=new f["a"]({routes:[{path:"/",name:"Home",component:St},{path:"/login",name:"Login",component:M},{path:"/game/:formula",name:"Game",component:Rt},{path:"/elements",name:"Elements",component:qt}]}),Zt=(a("4fad"),a("3835")),te=(a("a17d"),K["dia"].Element.define("rough.Rectangle",{z:6,attrs:{root:{magnet:!1},pointers:{refWidth:"100%",refHeight:"100%",pointerShape:"rectangle"},border:{rough:{fillSketch:!1},stroke:"#333333",strokeWidth:2},body:{rough:{fillSketch:!0},strokeWidth:2,stroke:"#c6c7e2"},label:{textWrap:{ellipsis:!0,width:"200%",height:200},textVerticalAnchor:"top",textAnchor:"middle",fontFamily:"Ensimmainen",refX:"50%",refY:"13%",refY2:10,fontSize:30,fontWeight:"bold",fill:"#FFFFFF",stroke:"#333333",strokeWidth:.8,pointerEvents:"none"}}},{markup:[{tagName:"path",selector:"pointers",attributes:{magnet:"on-shift",fill:"transparent"}},{tagName:"path",selector:"body",attributes:{"pointer-events":"none"}},{tagName:"path",selector:"border",attributes:{"pointer-events":"none",fill:"none"}},{tagName:"text",selector:"label"}]},{create:function(t){return new this({attrs:{pointers:{pointerShape:t},body:{rough:{type:t}},border:{rough:{type:t}}}})},attributes:{rough:{set:function(t,e){var a=this.paper.rough;if(a){var n,i={fill:"dummy",hachureAngle:t.hachureAngle,hachureGap:t.hachureGap,fillStyle:t.fillStyle};switch(t.type){case"ellipse":n=a.generator.ellipse(e.x+e.width/2,e.y+e.height/2,e.width,e.height,i);break;case"rectangle":default:n=a.generator.rectangle(e.x,e.y,e.width,e.height,i);break}var s=n.sets;return{d:a.opsToPath(s[t.fillSketch?0:1])}}}},pointerShape:{set:function(t,e){var a,n=e.width,i=e.height;switch(t){case"ellipse":a=Object(K["V"])("ellipse").attr({cx:n/2,cy:i/2,rx:n/2,ry:i/2});break;default:a=Object(K["V"])("rect").attr({width:n,height:i});break}return{d:a.convertToPathData()}}}}})),ee=te,ae={install:function(t){for(var e={},a=0,n=Object.entries(K);a<n.length;a++){var i=Object(Zt["a"])(n[a],2),s=i[0],o=i[1];e[s]=o}Object.defineProperty(t.prototype,"$joint",{value:e}),t.prototype.$roughElementDefinition=ee,t.prototype.$roughLink=Q,t.prototype.roughCircle=function(t,e,a,n){var i=ee.create("ellipse").prop({size:{width:t,height:t},position:{x:0,y:0},attrs:{body:{rough:{hachureAngle:60,hachureGap:10,fillStyle:"solid"},fill:a,stroke:a},border:{rough:{hachureAngle:60,hachureGap:8}},label:{refX:t/2,refY:t/10,text:e,stroke:n,fontSize:t/2}}});return i.set("movable",!0),i},t.prototype.roughBox=function(t,e){var a="#ededed",n=ee.create("rectangle").prop({size:{width:t,height:e},position:{x:0,y:0},attrs:{body:{rough:{hachureAngle:70,hachureGap:20,fillStyle:"cross-hatch"},fill:a,stroke:a},border:!1}});return n.set("movable",!1),n}}},ne=a("896d"),ie={install:function(t){t.prototype.config=ne}},se=a("5886");a("4413");n["a"].use(se["a"]),n["a"].use(ae),n["a"].use(ie),n["a"].config.productionTip=!1,new n["a"]({router:Qt,render:function(t){return t(p)}}).$mount("#app")},7808:function(t,e,a){"use strict";var n=a("bbc8"),i=a.n(n);i.a},"79eb":function(t,e,a){"use strict";var n=a("8651"),i=a.n(n);i.a},"7d65":function(t,e,a){"use strict";var n=a("864c"),i=a.n(n);i.a},"85ec":function(t,e,a){},"863c":function(t,e,a){"use strict";var n=a("3bfe"),i=a.n(n);i.a},"864c":function(t,e,a){},8651:function(t,e,a){},"896d":function(t){t.exports=JSON.parse('{"paper":{"gridSize":1,"drawGrid":false},"availableElements":{"distance":10,"xOffset":20,"yOffset":20,"boxWidth":100,"boxHeight":100,"boxText":"Elements"},"link":{"removeButtOffset":"48%"}}')},"9b59":function(t,e,a){},af1f:function(t,e,a){"use strict";var n=a("e506"),i=a.n(n);i.a},bbc8:function(t,e,a){},d5da:function(t,e,a){},d7d1:function(t,e,a){},e506:function(t,e,a){},e596:function(t,e,a){"use strict";var n=a("2fc5"),i=a.n(n);i.a},e775:function(t,e,a){"use strict";var n=a("548b"),i=a.n(n);i.a},ef85:function(t,e,a){},f43c:function(t,e,a){"use strict";var n=a("4d28"),i=a.n(n);i.a}});
//# sourceMappingURL=app.88b4274e.js.map